## `防重设计`

在系统设计时,某些场景如重复支付,重复扣减库存,结算页重复提交等需要进行防重设计;

一方面需要详细记录请求的情况,采用防重key,`token`,防重表;

## `幂等设计`

在交易系统中,经常会用到消息,而现有消息中间件基本不保证不发生重复消息的消费;因此,需要业务系统在重复消息消费时进行幂等处理;

## `流程可定义`

## `状态与状态机`

在设计系统时,订单或者交易会存在正向状态和逆向状态等,需要根据系统的特征来决定要不要分离存储.状态设计时应有状态轨迹,方便用户跟踪当前订单或交易的轨迹并记录相关日志,出问题时可回溯问题;

另外,对于状态的变迁,要考虑是否使用状态机来驱动状态的变更和后续流程节点操作,尤其当状态很多的时候使用状态机能更好地控制状态迁移;

## `后台系统操作可反馈`

很多场景都需要反馈,因此在设计后台系统时,需要考虑效果的可预览,可反馈;

## `后台系统审批化`

对于有些重要的后台功能需要设计审批流,并对操作进行日志记录,从而保证操作可追溯,可审计;

## `文档和注释`与`备份`