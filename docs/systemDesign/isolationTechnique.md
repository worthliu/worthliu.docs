隔离是指将系统或资源分隔开:
+ `系统隔离`是为了在系统发生故障时,能限定传播范围和影响范围;
  + 发生故障后不会出现滚雪球效应,从而保证只有出问题的服务不可用;
+ `资源隔离`,通过隔离来减少资源竞争,保障服务间的相互不影响和可用性;

## `线程隔离`

线程隔离主要是指线程池隔离,在实际使用时,会把请求分类,然后交给不同的线程池处理;

当一种业务的请求处理发生问题时,不会将故障扩散到其他线程池,从而保证其他服务可用;

## `进程隔离`

将系统拆分为多个子系统来实现物理隔离;通过进程隔离使得某个子系统出现问题时不会影响到其他子系统;

## `集群隔离`

随着系统的发展,单实例服务无法满足需求,此时需要服务化技术,通过部署多个服务形成服务集群,来提升系统容量;

随着调用方的增多,当某个服务会影响到其他服务的稳定性时,应该考虑为其提供单独的服务集群,即为服务分组;

## `机房隔离`

随着系统可用性的要求,会进行多机房部署,每个机房的服务都有自己的服务分组,本机房的服务应该只调用本机房服务,不进行跨机房第哦啊用.

其中,一个机房服务发生问题时,可以通过`DNS或负载均衡`将请求全部切到另一个机房,或者考虑服务能自动重试其他机房的服务,从而提升系统可用性;

## `读写隔离`

通过主从模式将读和写集群分离,读服务只从集群获取数据,当主集群出现问题时,从集群还是可用的,从而不影响用户访问.而当从集群出现问题时,可以进行其他集群的重试;

## `动静隔离`

将动态内容和静态资源分离,一般应该将静态资源放在`CDN`上;

## `爬虫隔离`

+ 限流解决
+ 在负载均衡层面将爬虫路由到单独集群;

## `热点隔离`

+ 读热点,使用多级缓存来搞定;
+ 写热点,通过缓存+队列模式削峰;

## `资源隔离`

## `Hystrix`

`Hystrix`是用来隔离分布式服务故障.
+ 提供线程和信号量隔离,以减少不同服务之间资源竞争带来的相互影响;
+ 提供优雅降级机制;
+ 提供熔断机制使得服务可以快速失败,而不是一直阻塞等待服务响应,并能从中快速恢复;


## 基于`Servlet3`实现请求隔离

`Tomcat`在收到`HTTP`请求后会按照如下流程处理请求:
+ 容器负责接收并解析请求为`HttpServletRequest`
+ 然后交给`Servlet`进行业务处理
+ 最后通过`HttpServletResponse`写出响应

**在`Servlet2.x`规范中,所有这些处理都是同步进行的,就是说必须在一个线程中完成从接收请求,业务处理到响应;**

>而请求异步化后可以得到的好处:
+ 基于`NIO`能处理更高的并发连接数;
+ 请求解析和业务处理线程池分离
+ 根据业务重要性对业务分级,并分级线程池;
+ 对业务线程池进行监控,运维,降级等处理;

