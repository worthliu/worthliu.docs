## 什么是`Zab`协议？
`Zab`协议的全称是`Zookeeper Atomic Broadcast`（Zookeeper原子广播）。
**`Zookeeper` 是通过 `Zab` 协议来保证分布式事务的最终一致性**。

>**`Zab`协议是为分布式协调服务`Zookeeper`专门设计的一种支持崩溃恢复的原子广播协议 ，是Zookeeper保证`数据一致性`的核心算法**。

`Zab`借鉴了`Paxos`算法，但又不像`Paxos`那样，是一种通用的分布式一致性算法。

它是特别为`Zookeeper`设计的支持崩溃恢复的原子广播协议。
在`Zookeeper`中主要依赖`Zab`协议来实现数据一致性，基于该协议，`zk`实现了一种主备模型（即`Leader`和`Follower`模型）的系统架构来保证集群中各个副本之间数据的一致性。

**这里的主备系统架构模型，就是指只有一台客户端（Leader）负责处理外部的写事务请求，然后`Leader`客户端将数据同步到其他`Follower`节点**。

`Zookeeper`客户端会随机的链接到`zookeeper`集群中的一个节点;
+ 如果是读请求，就直接从当前节点中读取数据；
+ 如果是写请求，那么节点就会向`Leader`提交事务，`Leader`接收到事务提交，会广播该事务，只要超过半数节点写入成功，该事务就会被提交。


>`Zab` 协议的特性：
+ `Zab` 协议需要确保那些已经在`Leader`服务器上提交（Commit）的事务最终被所有的服务器提交。
+ `Zab` 协议需要确保丢弃那些只在`Leader`上被提出而没有被提交的事务。
