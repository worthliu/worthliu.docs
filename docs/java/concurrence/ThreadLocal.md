# ThreadLocal

## 线程本地存储：
>* 防止任务在共享资源上产生冲突的第二种方式是根除对变量的共享。（以空间换取时间）
* 线程本地存储是一种自动化机制，可以为使用相同变量的每个不同的线程都创建不同的存储。

>* `ThreadLocal`对象通常当作静态域存储。
* 在创建`ThreadLocal`时，你只能通过`get（）`和`set（）`方法来访问该对象的内容，其中，`get（）`方法将返回与其线程相关联的对象的副本，而`set（）`会将参数插入到为其线程存储的对象中，并返回存储中原有的对象；

## ThreadLocal(线程变量副本)
`Synchronized`实现内存共享，`ThreadLocal`为每个线程维护一个本地变量。

>采用空间换时间，它用于线程间的数据隔离，为每一个使用该变量的线程提供一个副本，每个线程都可以独立地改变自己的副本，而不会和其他线程的副本冲突。


>* `ThreadLocal`类中维护一个Map，用于存储每一个线程的变量副本，Map中元素的键为线程对象，而值为对应线程的变量副本。
* `ThreadLocal`在Spring中发挥着巨大的作用，在管理Request作用域中的Bean、事务管理、任务调度、AOP等模块都出现了它的身影。
* Spring中绝大部分Bean都可以声明成Singleton作用域，采用`ThreadLocal`进行封装，因此有状态的Bean就能够以singleton的方式在多线程中正常工作了。

